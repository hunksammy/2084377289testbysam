/* 
Quick.Box.Lite v1.3.2
@License:
  Code in this file (or any part of it) can be used only as part of Quick.Cms v6.7 or later. All rights reserved by OpenSolution.

Source files: http://opensolution.org/docs/qcms_v6/download/v6.7-js-src-plus-gulp-free.zip
*/
var oQuickBox=null;!function(h){h.fn.quickbox=function(i){var r={},u=0;function e(i,e){var n=h(e).attr("class");h(e).on("click",function(i){i.preventDefault()});var o=n.indexOf("["),t=n.indexOf("]"),a=n.substr(o+1,t-o-1);r[a]||(""==a&&(a="single"),r[a]||(r[a]=[])),r[a]&&(r[a][r[a].length]=h(e),h(e).on("click",{sIndex:a,iImage:r[a].length-1},function(i){!function(i,e,n){var o,t,a=void 0!==h(i).attr("data-quickbox-msg");if(!h("#quick-box").length){h("body").append('<div id="quick-box" onkeypress="keyUpHandler" ><div class="background"></div><div class="quick-box-container"><div class="image-wrapper"></div></div></div>'),sQuickGallery=e,iCurrentImage=n,u=r[sQuickGallery].length,"string"==typeof oConfig.sNavOutside&&("arrows"==oConfig.sNavOutside&&(o=!0),"close"==oConfig.sNavOutside&&(t=!0),"all"==oConfig.sNavOutside&&(o=t=!0)),h("#quick-box "+(void 0!==t?"":".image-wrapper")).prepend('<a href="#" class="close" aria-label="close">x</a>'),h("#quick-box "+(void 0!==o?"":".image-wrapper")).prepend('<a href="#" class="prev arrow">'+oConfig.sPrevious+'</a><a href="#" class="next arrow">'+oConfig.sNext+"</a>"),!0==a?function(i){h("#quick-box .image-wrapper").removeClass("image-wrapper").addClass("content-wrapper"),h("#quick-box .prev, #quick-box .next").remove(),h("#quick-box .content-wrapper").prepend(h("."+i).clone()),h("#quick-box .content-wrapper ."+i).show(),d()}(h(i).attr("data-quickbox-msg")):g(),"single"!=sQuickGallery&&(h("#quick-box").on("swipeleft",function(){p("next",!0)}),h("#quick-box").on("swiperight",function(){p("prev",!0)}),h(window).on("orientationchange",function(i){g()})),h(window).resize(function(){!0==a?d():(h("#quick-box .quick-box-container img").css({height:"auto",width:"auto"}),l())});function c(i){i.preventDefault(),h("#quick-box").remove(),document.onkeyup=null}h("#quick-box .background, #quick-box .close").on("click",function(i){c(i)}),0<h("#quick-box .close-box").length&&h("#quick-box .close-box").on("click",function(i){c(i)}),h("#quick-box .prev").on("click",function(i){p("prev"),i.preventDefault()}),h("#quick-box .next").on("click",function(i){p("next"),i.preventDefault()}),h("#quick-box")&&(document.onkeyup=s)}}(this,i.data.sIndex,i.data.iImage)}))}function s(i){37==i.keyCode&&0<h("#quick-box .prev:visible").length&&p("prev"),39==i.keyCode&&0<h("#quick-box .next:visible").length&&p("next"),27==i.keyCode&&h("#quick-box").remove()}function g(){h("#quick-box .image-wrapper img").length&&h("#quick-box .image-wrapper img").remove(),l(),h("#quick-box .prev span, #quick-box .next span").hide(),h("#quick-box .image-wrapper .loading").remove(),h("#quick-box .image-wrapper").append(oConfig.sLoading),h("#quick-box .description").hide();h("<img />").attr("src",r[sQuickGallery][iCurrentImage].attr("href")).on("load",function(){h("#quick-box .prev span, #quick-box .next span").show(),h("#quick-box .image-wrapper .loading").remove(),h("#quick-box .image-wrapper").append(h(this)),h("#quick-box .description").remove(),void 0!==r[sQuickGallery][iCurrentImage].attr("title")&&""!=r[sQuickGallery][iCurrentImage].attr("title")&&h("#quick-box .quick-box-container").append('<p class="description">'+r[sQuickGallery][iCurrentImage].attr("title")+"</p>").show(),h("#quick-box .close").show(),0==iCurrentImage||"single"==sQuickGallery?h("#quick-box .prev").hide():h("#quick-box .prev").show(),iCurrentImage==u-1||"single"==sQuickGallery?h("#quick-box .next").hide():h("#quick-box .next").show(),h("#quick-box .navigation").length&&h("#quick-box .navigation").remove(),1<u&&"single"!=sQuickGallery&&h("#quick-box .image-wrapper").append('<div class="navigation"><p class="navigation__numbers"><span class="navigation__current">'+(iCurrentImage+1)+'</span><span class="navigation__sep">/</span><span class="navigation__all">'+u+"</span></p></div>"),l()})}function d(){iTopPos=Math.round((h(window).height()-h("#quick-box .content-wrapper").height())/2)+"px",iLeftPos=Math.round((h(window).width()-h("#quick-box .content-wrapper").width())/2)+"px",h("#quick-box .quick-box-container").animate({top:iTopPos,left:iLeftPos})}function o(i){h("#quick-box .quick-box-container img").css({height:i.iImageHeight+"px",width:i.iImageWidth+"px"}),h("#quick-box .description").css({position:"absolute",bottom:"0px"});var e=parseInt(h("#quick-box .description").height())+10;h("#quick-box .image-wrapper .navigation").css("bottom",e+"px"),!0===oConfig.bFullSizeLink&&(h("#quick-box .navigation .full-size").remove(),h("#quick-box .navigation").append('<a href="'+r[sQuickGallery][iCurrentImage].attr("href")+'" class="full-size" target="_blank">Full size</a>'))}function l(){var i,e,n={iWindowHeight:h(window).height(),iWindowWidth:h(window).width(),iImageHeight:h("#quick-box .quick-box-container img").height(),iImageWidth:h("#quick-box .quick-box-container img").width()};n=function(i){var e=0<i.iImageHeight?Math.round(i.iImageHeight/i.iImageWidth*100)/100:0;return 1<=e?(i.iWindowHeight<i.iImageHeight||i.iWindowWidth<i.iImageWidth)&&(i.iImageHeight=i.iWindowHeight,i.iImageWidth=Math.round(i.iImageHeight/e),i.iWindowWidth<i.iImageWidth&&(i.iImageWidth=i.iWindowWidth,i.iImageHeight=Math.round(i.iImageWidth*e)),o(i)):0<e&&(i.iWindowWidth<i.iImageWidth||i.iWindowHeight<i.iImageHeight)&&(i.iImageWidth=i.iWindowWidth,i.iImageHeight=Math.round(i.iImageWidth*e),i.iWindowHeight<i.iImageHeight&&(i.iImageHeight=i.iWindowHeight,i.iImageWidth=Math.round(i.iImageHeight/e)),o(i)),i}(n),h("#quick-box .description").css({width:n.iImageWidth+"px"}),h("#quick-box .quick-box-container").height(),i=Math.round((n.iWindowHeight-n.iImageHeight)/2)+"px",e=Math.round((n.iWindowWidth-n.iImageWidth)/2)+"px",h("#quick-box .quick-box-container").css({top:i,left:e})}function p(i,e){if("prev"==i&&-1<iCurrentImage-1){iCurrentImage-=1;var n=!0}if("next"==i&&iCurrentImage+1<u){iCurrentImage+=1;n=!0}if(n)if(e){var o=h(window).width();"next"==i&&(o="-"+h("#quick-box .quick-box-container").width()),h("#quick-box .quick-box-container").animate({left:o+"px"},500,function(){g(),n=null})}else g(),n=null}return iCurrentImage=0,sQuickGallery=null,aDefault={sNavOutside:"null",bFullSizeLink:!0,sLoading:'<span class="loading">Loading...</span>',sPrevious:'<span class="wai">Previous</span>',sNext:'<span class="wai">Next</span>'},oConfig={},oConfig=h.extend({},aDefault,i),this.each(e),this.changeContentPosition=d,this.addLinkToCache=e,this}}(jQuery);